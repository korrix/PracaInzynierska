% !TEX root = praca.tex
\chapter{Specyfikacja projektu}
\label{cha:specyfikacjaProjektu}

\section{Architektura}
\label{sec:architektura}
Projekt składa się z dwóch części - oprogramowania instalowanego na każdym węźle (zawierającego statycznie skompilowaną bibliotekę możliwych do uruchomienia zadań) oraz biblioteki klienckiej pozwalającej na uruchamianie zadań z poziomu kodu użytkownika. 

\subsection{Oprogramowanie węzła}
\label{ssec:taskell-node}
Oprogramowanie węzła ma za zadanie połączyć się ze skonfigurowanym wcześniej brokerem a następnie nasłuchiwać komunikatów zlecenia lub przerwania zadania.

\subsection{Biblioteka zadań}
\label{ssec:task-library}
Kiedy oprogramowanie węzła otrzymuje żądanie uruchomienia zadania, musi dynamicznie w czasie działania aplikacji podjąć decyzję o tym w jaki sposób obsłużyć to zadanie. W tym celu moduł biblioteki zadań musi eksportować tablicę mieszającą zawierającą jako klucze nazwy zadań i funkcje obsługi zadania jako wartości. 

\subsection{Biblioteka kliencka}
\label{ssec:taskell-api}
Biblioteka kliencka umożliwia łączenie się z brokerem wiadomości a następnie wysyłanie komunikatu zlecającego lub przerywającego zadanie w odpowiednim, ustalonym wcześniej formacie
\section{Sekwencja zdarzeń}
\label{sec:sekwencja}

\section{Konfiguracja}
\label{sec:konfiguracja}
Oprogramowanie węzła wymaga pliku konfiguracyjnego taskell.conf w następującym formacie:
\begin{verbatim}
taskell {
  rabbitmq {
    host     = "localhost"
    vhost    = "/"
    username = "guest"
    password = "guest"
  }
  abortExchange = "taskell.abort"
  parallelism = 1
  queues = ["taskell.q1", "taskell.q2"]
}
\end{verbatim}

\begin{description}[align=left]
  \item [taskell.rabbitmq.host] Nazwa sieciowa lub adres IP brokera
  \item [taskell.rabbitmq.vhost] URL hosta wirtualnego jeśli na fizycznej maszynie działa więcej niż jeden broker
  \item [taskell.rabbitmq.username] Nazwa użytkownika skonfigurowana na brokerze
  \item [taskell.rabbitmq.password] Hasło użytkownika skonfigurowana na brokerze
  \item [taskell.abortExchange] Nazwa wymiennika do którego każdy węzeł przypina swoją kolejkę celem nasłuchu zleceń przerwania zadana
  \item [taskell.queues] Lista kolejek, które węzeł ma nasłuchiwać w oczekiwaniu na zadanie
  \item [taskell.parallelism] Liczba zadań, które węzeł może przetwarzać jednocześnie
\end{description}

\section{Start aplikacji}
\label{sec:start}
Podczas uruchamiania węzła następuje odczyt pliku konfiguracyjnego ze ścieżki podanej jako argument linii komend, 

\section{Wątek nadzorujący}
\label{sec:nadzorca}

\section{Śledzenie zatrzymań}
\label{sec:zatrzymania}

\section{Raportowanie wyników}
\label{sec:raportowanie}